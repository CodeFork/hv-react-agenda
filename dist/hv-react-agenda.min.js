var HvReactAgenda=function(e){function t(s){if(a[s])return a[s].exports;var n=a[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){function s(e,t){var a={};return e=e.sort(function(e,t){return e.startDateTime-t.startDateTime}),e.forEach(function(e){for(var s=60/t,i=e.startDateTime.getMinutes()%s,r=n(e.startDateTime).subtract(i,"minutes").toDate(),l=e.endDateTime,h=n.duration(n(l).diff(n(r))),c=Math.ceil(h.asHours()/(s/60)),d=[],m=0;c>m;m++){var u=n(r).add(m*s,"minutes").format("YYYY-MM-DDTHH:mm:ss");d.push(u)}d.forEach(function(t){var s=o.omit(e,"classes");s.classes=a[t]?a[t].classes+" "+e.classes:e.classes||"",s.cellRefs=d,a[t]=s})},this),a}var n=a(1),i=a(2),r=i.PropTypes,o=a(3),l={name:"",classes:"",cellRefs:[]},h=i.createClass({displayName:"HvReactAgenda",propTypes:{locale:r.string.isRequired,startDate:r.instanceOf(Date),startAtTime:r.number.isRequired,rowsPerHour:r.oneOf([1,2,3,4]).isRequired,numberOfDays:r.oneOf([1,2,3,4,5,6,7]).isRequired,items:r.arrayOf(r.shape({name:r.string,startDateTime:r.instanceOf(Date).isRequired,endDateTime:r.instanceOf(Date).isRequired,classes:r.string})),onItemSelect:r.func,onDateRangeChange:r.func,minDate:r.instanceOf(Date),maxDate:r.instanceOf(Date)},getDefaultProps:function(){return{locale:"en",startAtTime:8,rowsPerHour:4,numberOfDays:5,items:[],onItemSelect:function(){},onDateRangeChange:function(){}}},getInitialState:function(){return{date:n(),items:{},itemOverlayStyles:{},highlightedCells:[],focusedCell:null}},componentWillMount:function(){this.handleBeforeUpdate(this.props)},componentWillUnmount:function(){},componentWillReceiveProps:function(e){this.handleBeforeUpdate(e)},componentDidMount:function(){var e=this.refs.agendaScrollContainer.getDOMNode(),t=this.refs["hour-"+this.props.startAtTime].getDOMNode();e.scrollTop=t.offsetTop,this.handleUpdate(this.props,this.getInitialState())},componentDidUpdate:function(e,t){this.handleUpdate(e,t)},getHeaderColumns:function(){for(var e=[],t=0;t<this.state.numberOfDays;t++)e.push(n(this.state.date).add(t,"days").toDate());return e},getBodyRows:function(){for(var e=[],t=60/this.props.rowsPerHour,a=0;a<24*this.props.rowsPerHour;a++)e.push(n(this.state.date).startOf("day").add(Math.floor(a*t),"minutes"));return e},getMinuteCells:function(e){for(var t=[],a=0;a<this.state.numberOfDays;a++){var s=n(e).add(a,"days").format("YYYY-MM-DDTHH:mm:ss");t.push({cellRef:s,item:this.state.items[s]||l})}return t},getItemOverlayStyle:function(e){if(this.state.focusedCell===e&&o.contains(this.state.highlightedCells,e)){var t=this.refs[o.first(this.state.highlightedCells)].getDOMNode(),a=this.refs[o.last(this.state.highlightedCells)].getDOMNode(),s=t.offsetTop-t.scrollTop+t.clientTop,n=a.offsetTop-a.scrollTop+a.clientTop;return{display:"block",zIndex:1,position:"absolute",width:t.offsetWidth,textAlign:"center",top:t.offsetTop+(n-s)/2}}return{display:"none"}},handleBeforeUpdate:function(e){e.hasOwnProperty("startDate")&&e.startDate!==this.state.date.toDate()&&this.setState({date:n(e.startDate)}),e.hasOwnProperty("items")&&this.setState({items:s(e.items,e.rowsPerHour)}),e.hasOwnProperty("numberOfDays")&&e.numberOfDays!==this.state.numberOfDays&&this.setState({numberOfDays:e.numberOfDays}),!e.hasOwnProperty("minDate")||this.state.hasOwnProperty("minDate")&&e.minDate===this.state.minDate.toDate()||this.setState({minDate:n(e.minDate)}),!e.hasOwnProperty("maxDate")||this.state.hasOwnProperty("maxDate")&&e.maxDate===this.state.maxDate.toDate()||this.setState({maxDate:n(e.maxDate)})},handleUpdate:function(){},handleOnNextButtonClick:function(){var e=n(this.state.date).add(this.state.numberOfDays,"days");this.state.hasOwnProperty("maxDate")&&(e=n.min(e,this.state.maxDate));var t=e,a=n(t).add(this.state.numberOfDays-1,"days");e!==this.state.date&&this.setState({date:e}),this.props.onDateRangeChange&&this.props.onDateRangeChange(t.toDate(),a.toDate())},handleOnPrevButtonClick:function(){var e=n(this.state.date).subtract(this.state.numberOfDays,"days");this.state.hasOwnProperty("minDate")&&(e=n.max(e,this.state.minDate));var t=e,a=n(t).add(this.state.numberOfDays-1,"days");e!==this.state.date&&this.setState({date:e}),this.props.onDateRangeChange&&this.props.onDateRangeChange(t.toDate(),a.toDate())},handleMouseEnter:function(e){e.item&&(this.setState({focusedCell:e.cellRef}),this.setState({highlightedCells:e.item.cellRefs}))},handleMouseLeave:function(){this.setState({focusedCell:null}),this.setState({highlightedCells:[]})},handleMouseClick:function(e){this.props.onItemSelect&&e.item.startDateTime&&this.props.onItemSelect(o.omit(e.item,"cellRefs"))},render:function(){var e=function(e,t){var a=n(e);return a.locale(this.props.locale),i.createElement("th",{ref:"column-"+(t+1),key:"col-"+t,className:"agenda__cell --head"},a.format("ddd M/D"))},t=function(e,t){if(t%this.props.rowsPerHour===0){var s="hour-"+Math.floor(t/this.props.rowsPerHour),r=n(e);return r.locale(this.props.locale),i.createElement("tr",{key:"row-"+t,ref:s,className:"agenda__row --hour-start"},i.createElement("td",{className:"agenda__cell --time",rowSpan:this.props.rowsPerHour},r.format("LT")),this.getMinuteCells(e).map(a,this))}return i.createElement("tr",{key:"row-"+t},this.getMinuteCells(e).map(a,this))},a=function(e,t){var a={agenda__cell:!0,"--hovered":o.contains(this.state.highlightedCells,e.cellRef),"--hovered-first":o.contains(this.state.highlightedCells,e.cellRef)&&o.first(this.state.highlightedCells)===e.cellRef,"--hovered-last":o.contains(this.state.highlightedCells,e.cellRef)&&o.last(this.state.highlightedCells)===e.cellRef};a[e.item.classes]=!0;var s=i.addons.classSet(a);return i.createElement("td",{ref:e.cellRef,key:"cell-"+t,onMouseEnter:this.handleMouseEnter.bind(this,e),onMouseLeave:this.handleMouseLeave.bind(this,e),onClick:this.handleMouseClick.bind(this,e),className:s},i.createElement("div",{style:this.getItemOverlayStyle(e.cellRef),className:"agenda__item-overlay-title"},e.item.name))},s=function(e){return e.hasOwnProperty("minDate")?e.date.toDate().getTime()===e.minDate.toDate().getTime():!1},r=function(e){return e.hasOwnProperty("maxDate")?e.date.toDate().getTime()===e.maxDate.toDate().getTime():!1};return i.createElement("div",{className:"agenda"},i.createElement("div",{className:"agenda__table --header"},i.createElement("table",null,i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{ref:"column-0",className:"agenda__cell --controls"},i.createElement("div",{className:"agenda__prev"+(s(this.state)?" --disabled":""),onClick:this.handleOnPrevButtonClick},i.createElement("span",null,"«")),i.createElement("div",{className:"agenda__next"+(r(this.state)?" --disabled":""),onClick:this.handleOnNextButtonClick},i.createElement("span",null,"»"))),this.getHeaderColumns().map(e,this))))),i.createElement("div",{ref:"agendaScrollContainer",className:"agenda__table --body",style:{position:"relative"}},i.createElement("table",null,i.createElement("tbody",null,this.getBodyRows().map(t,this)))))}});e.exports=h},function(e){e.exports=moment},function(e){e.exports=React},function(e){e.exports=_}]);