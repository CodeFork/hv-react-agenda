var HvReactAgenda=function(e){function t(a){if(s[a])return s[a].exports;var r=s[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){var a=s(1),r=s(2),i=r.PropTypes,l=s(3),n={name:"",classes:"",cellRefs:[]},o=r.createClass({displayName:"HvReactAgenda",propTypes:{locale:i.string.isRequired,startDate:i.instanceOf(Date),startAtTime:i.number.isRequired,rowsPerHour:i.oneOf([1,2,3,4]).isRequired,numberOfDays:i.oneOf([1,2,3,4,5,6,7]).isRequired,items:i.arrayOf(i.shape({name:i.string,startDateTime:i.instanceOf(Date).isRequired,endDateTime:i.instanceOf(Date).isRequired,classes:i.string})),onItemSelect:i.func},getDefaultProps:function(){return{locale:"en",startAtTime:8,rowsPerHour:4,numberOfDays:5}},getInitialState:function(){return{date:a(),items:{},itemOverlayStyles:{},highlightedCells:[],focusedCell:null}},componentWillMount:function(){this.props.startDate&&this.setState({date:a(this.props.startDate)}),this.props.items&&this.setState({items:this.mapItems(this.props.items)})},componentDidMount:function(){var e=this.refs.agendaScrollContainer.getDOMNode(),t=this.refs["hour-"+this.props.startAtTime].getDOMNode();e.scrollTop=t.offsetTop},componentWillReceiveProps:function(){this.props.items&&this.setState({items:this.mapItems(this.props.items)})},nextRange:function(){this.setState({date:this.state.date.add(this.props.numberOfDays,"days")})},prevRange:function(){this.setState({date:this.state.date.subtract(this.props.numberOfDays,"days")})},mapItems:function(e){var t={};return e.forEach(function(e){for(var s=60/this.props.rowsPerHour,r=e.startDateTime.getMinutes()%s,i=a(e.startDateTime).subtract(r,"minutes").toDate(),n=e.endDateTime,o=a.duration(a(n).diff(a(i))),c=Math.ceil(o.asHours()/(s/60)),h=[],d=0;c>d;d++){var u=a(i).add(d*s,"minutes").format("YYYY-MM-DDTHH:mm:ss");h.push(u)}h.forEach(function(s){var a=l.omit(e,"classes");a.classes=t[s]?t[s].classes+" "+e.classes:e.classes||"",a.cellRefs=h,t[s]=a})},this),t},getHeaderColumns:function(){for(var e=[],t=0;t<this.props.numberOfDays;t++)e.push(a(this.state.date).add(t,"days").toDate());return e},getBodyRows:function(){for(var e=[],t=60/this.props.rowsPerHour,s=0;s<24*this.props.rowsPerHour;s++)e.push(a(this.state.date).startOf("day").add(Math.floor(s*t),"minutes"));return e},getMinuteCells:function(e){for(var t=[],s=0;s<this.props.numberOfDays;s++){var r=a(e).add(s,"days").format("YYYY-MM-DDTHH:mm:ss");t.push({cellRef:r,item:this.state.items[r]||n})}return t},getItemOverlayStyle:function(e){if(this.state.focusedCell===e&&l.contains(this.state.highlightedCells,e)){var t=this.refs[l.first(this.state.highlightedCells)].getDOMNode(),s=this.refs[l.last(this.state.highlightedCells)].getDOMNode(),a=t.offsetTop-t.scrollTop+t.clientTop,r=s.offsetTop-s.scrollTop+s.clientTop;return{display:"block",zIndex:1,position:"absolute",width:t.offsetWidth,textAlign:"center",top:t.offsetTop+(r-a)/2}}return{display:"none"}},handleMouseEnter:function(e){e.item&&(this.setState({focusedCell:e.cellRef}),this.setState({highlightedCells:e.item.cellRefs}))},handleMouseLeave:function(){this.setState({focusedCell:null}),this.setState({highlightedCells:[]})},handleMouseClick:function(e){this.props.onItemSelect&&e.item.startDateTime&&this.props.onItemSelect(l.omit(e.item,"cellRefs"))},render:function(){var e=function(e,t){var s=a(e);return s.locale(this.props.locale),r.createElement("th",{ref:"column-"+(t+1),key:"col-"+t,className:"agenda__cell --head"},s.format("ddd M/D"))},t=function(e,t){if(t%this.props.rowsPerHour===0){var i="hour-"+Math.floor(t/this.props.rowsPerHour),l=a(e);return l.locale(this.props.locale),r.createElement("tr",{key:"row-"+t,ref:i,className:"agenda__row --hour-start"},r.createElement("td",{className:"agenda__cell --time",rowSpan:this.props.rowsPerHour},l.format("LT")),this.getMinuteCells(e).map(s,this))}return r.createElement("tr",{key:"row-"+t},this.getMinuteCells(e).map(s,this))},s=function(e,t){var s={agenda__cell:!0,"--hovered":l.contains(this.state.highlightedCells,e.cellRef),"--hovered-first":l.contains(this.state.highlightedCells,e.cellRef)&&l.first(this.state.highlightedCells)===e.cellRef,"--hovered-last":l.contains(this.state.highlightedCells,e.cellRef)&&l.last(this.state.highlightedCells)===e.cellRef};s[e.item.classes]=!0;var a=r.addons.classSet(s);return r.createElement("td",{ref:e.cellRef,key:"cell-"+t,onMouseEnter:this.handleMouseEnter.bind(this,e),onMouseLeave:this.handleMouseLeave.bind(this,e),onClick:this.handleMouseClick.bind(this,e),className:a},r.createElement("div",{style:this.getItemOverlayStyle(e.cellRef),className:"agenda__item-overlay-title"},e.item.name))};return r.createElement("div",{className:"agenda"},r.createElement("div",{className:"agenda__table --header"},r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{ref:"column-0",className:"agenda__cell --controls"},r.createElement("div",{className:"agenda__prev",onClick:this.prevRange},r.createElement("span",null,"«")),r.createElement("div",{className:"agenda__next",onClick:this.nextRange},r.createElement("span",null,"»"))),this.getHeaderColumns().map(e,this))))),r.createElement("div",{ref:"agendaScrollContainer",className:"agenda__table --body",style:{position:"relative"}},r.createElement("table",null,r.createElement("tbody",null,this.getBodyRows().map(t,this)))))}});e.exports=o},function(e){e.exports=moment},function(e){e.exports=React},function(e){e.exports=_}]);